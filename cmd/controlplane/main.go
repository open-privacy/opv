package main

import (
	_ "github.com/open-privacy/opv/cmd/controlplane/docs" // docs is generated by Swag CLI, you have to import it.
	"github.com/open-privacy/opv/pkg/config"
	"github.com/open-privacy/opv/pkg/controlplane"
	"github.com/tj/go-gracefully"
)

// @title Open Privacy Vault Control Plane API
// @version 1.0
// @description Open Privacy Vault Control Plane API.
// @host localhost
// @basePath /api/v1

// @tag.name Grant
// @tag.description A grant is the unit of grant to access certain resource in OPV

func main() {
	cp := controlplane.MustNewControlPlane()
	cp.Start()
	defer cp.Stop()

	gracefully.Timeout = config.ENV.GracefullyShutdownTimeout
	gracefully.Shutdown()
}
